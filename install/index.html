<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="Kevin Huck (khuck@cs.uoregon.edu)" /><link rel="canonical" href="http://khuck.github.io/xpress-apex/install/" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Installation - APEX</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Installation";
        var mkdocs_page_input_path = "install.md";
        var mkdocs_page_url = "/xpress-apex/install/";
      </script>
    
    <script src="../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> APEX
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../quickstarthpx/">Quick Start (HPX)</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../quickstart/">Quick Start (standalone)</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../feature/">Feature Overview</a>
                </li>
              </ul>
              <ul class="current">
                <li class="toctree-l1 current"><a class="reference internal current" href="./">Installation</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#installation_with_hpx">Installation with HPX</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#standalone_installation">Standalone Installation</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#configuring_and_building_apex_with_cmake">Configuring and building APEX with CMake</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#other_cmake_settings_depending_on_your_needswants">Other CMake settings, depending on your needs/wants</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#other_cmake_variables_of_interest">Other CMake variables of interest</a>
    </li>
        </ul>
    </li>
    </ul>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../usage/">Usage</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../environment/">Useful Environment Variables</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../spec/">API Specification</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../refman/">API Doxygen Reference</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">APEX</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" alt="Docs"></a> &raquo;</li>
      <li>Installation</li>
    <li class="wy-breadcrumbs-aside">
          <a href="http://github.com/khuck/xpress-apex/edit/master/docs/install.md" class="icon icon-github"> Edit on GitHub</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="installing_apex">Installing APEX<a class="headerlink" href="#installing_apex" title="Permanent link">&para;</a></h1>
<h2 id="installation_with_hpx">Installation with HPX<a class="headerlink" href="#installation_with_hpx" title="Permanent link">&para;</a></h2>
<p>APEX is integrated into the <a href="https://hpx.stellar-group.org">HPX runtime</a>, and is integrated into the HPX build system.  To enable APEX measurement with HPX, enable the following CMake flags:</p>
<pre><code>-DHPX_WITH_APEX=TRUE
</code></pre>
<p>The <code>-DHPX_WITH_APEX_TAG=develop</code> can be used to indicate a specific release version of APEX, or to use a specific GitHub branch of APEX.  We recommend using the default configured version that comes with HPX (currently <code>v2.3.1</code>) or the <code>develop</code> branch.  Additional CMake flags include:</p>
<ul>
<li><code>-DAPEX_WITH_LM_SENSORS=TRUE</code> to enable <a href="https://hwmon.wiki.kernel.org/lm_sensors">LM sensors</a> support (assumed to be installed in default system paths)</li>
<li><code>-DAPEX_WITH_PAPI=TRUE</code> and <code>-DPAPI_ROOT=...</code> to enable <a href="https://icl.utk.edu/papi/">PAPI</a> support</li>
<li><code>-DAPEX_WITH_BFD=TRUE</code> and <code>-DBFD_ROOT=...</code> <em>or</em> <code>-DAPEX_BUILD_BFD=TRUE</code> to enable <a href="https://www.gnu.org/software/binutils/">Binutils</a> support for converting function/lambda/instruction pointers to human-readable code regions.  For demangling of C++ symbols, <code>demangle.h</code> needs to be installed with the binutils headers (not typical in system installations).</li>
<li><code>-DAPEX_WITH_MSR=TRUE</code> to enable <a href="https://github.com/LLNL/libmsr">libmsr</a> support for RAPL power measurement (typically not needed, as RAPL support is natively handled where available)</li>
<li><code>-DAPEX_WITH_OTF2=TRUE</code> and <code>-DOTF2_ROOT=...</code> to enable <a href="https://www.vi-hps.org/projects/score-p/index.html">OTF2 tracing</a> support</li>
<li><code>-DHPX_WITH_HPXMP=TRUE</code> to enable HPX OpenMP support and OMPT measurement support from APEX</li>
<li><code>-DAPEX_WITH_ACTIVEHARMONY=TRUE</code> and <code>-DACTIVEHARMONY_ROOT=...</code> to enable <a href="https://www.dyninst.org/harmony">Active Harmony</a> support</li>
<li><code>-DAPEX_WITH_CUDA=TRUE</code> to enable CUPTI and/or NVML support.  This support requires a working <code>nvcc</code> compiler in your path.</li>
</ul>
<h2 id="standalone_installation">Standalone Installation<a class="headerlink" href="#standalone_installation" title="Permanent link">&para;</a></h2>
<p>APEX is open source, and available on Github at <a href="http://github.com/khuck/xpress-apex">http://github.com/khuck/xpress-apex</a>.</p>
<p>For stability, most users will want to download the most recent release of APEX (for example, v2.3.1):</p>
<pre><code class="language-bash">wget https://github.com/khuck/xpress-apex/archive/v2.3.1.tar.gz
tar -xvzf v2.3.1.tar.gz
cd xpress-apex-2.3.1
</code></pre>
<p>Other users may want to work with the most recent code available, in which case you can clone the git repo:</p>
<pre><code class="language-bash">git clone https://github.com/khuck/xpress-apex.git
cd xpress-apex
</code></pre>
<h3 id="configuring_and_building_apex_with_cmake">Configuring and building APEX with CMake<a class="headerlink" href="#configuring_and_building_apex_with_cmake" title="Permanent link">&para;</a></h3>
<p>APEX is built with CMake. The minimum CMake settings needed for APEX are:</p>
<ul>
<li><code>-DCMAKE_INSTALL_PREFIX=...</code> some path to an installation location</li>
<li><code>-DCMAKE_BUILD_TYPE=...</code> one of Release, Debug, or RelWithDebInfo (recommended)</li>
</ul>
<p>Boost is <strong>NOT</strong> required to install APEX.  When building on Intel Phi, Boost is required if the compiler toolset does not include the latest GNU C++11 support. (may not still be true)</p>
<ul>
<li><code>-DBOOST_ROOT=...</code> the path to a Boost installation, 1.65 or newer</li>
</ul>
<p><strong>Note:</strong> <em>If the <code>BOOST_ROOT</code> environment variable is set to a working Boost installation directory, CMake will find it automatically.</em></p>
<p>The process for building APEX is:</p>
<p>1) Get the code (see above)</p>
<p>2) Enter the repo directory, make a build directory:</p>
<pre><code class="language-bash">cd xpress-apex-2.3.1
mkdir build
cd build
</code></pre>
<p>3) configure using CMake:</p>
<pre><code class="language-bash">cmake -DCMAKE_INSTALL_PREFIX=&lt;installation-path&gt; -DCMAKE_BUILD_TYPE=RelWithDebInfo ..
</code></pre>
<p>If Boost is required (Intel Phi <strong>only</strong>):</p>
<pre><code class="language-bash">cmake -DBOOST_ROOT=&lt;path-to-boost&gt; -DCMAKE_INSTALL_PREFIX=&lt;installation-path&gt; -DCMAKE_BUILD_TYPE=RelWithDebInfo ..
</code></pre>
<p>4) build with make:</p>
<pre><code class="language-bash">make
make test
make doc
make install
</code></pre>
<h3 id="other_cmake_settings_depending_on_your_needswants">Other CMake settings, depending on your needs/wants<a class="headerlink" href="#other_cmake_settings_depending_on_your_needswants" title="Permanent link">&para;</a></h3>
<p><strong>Note 1:</strong> <em>The </em><em>recommended</em><em> packages include:</em></p>
<ul>
<li><strong>Active Harmony</strong> - for autotuning policies</li>
<li><strong>OMPT</strong> - if OpenMP support is required (<a href="../usecases/#openmp-example">See the OpenMP use case</a> for an example)</li>
<li><strong>Binutils/BFD</strong> - if your runtime/application uses instruction addresses to identify timers, e.g. OpenMP</li>
<li><strong>PAPI</strong> - if you want hardware counter support (<a href="../usecases/#with-papi">See the PAPI use case</a> for an example)</li>
<li><strong>JEMalloc/TCMalloc</strong> - if your application is not already using a heap manager - see Note 2, below</li>
<li><strong>CUDA</strong> - if your application uses CUDA, APEX will use CUPTI/NVML to measure GPU activity</li>
</ul>
<p><strong>Note 2:</strong> <em>TCMalloc or JEMalloc will potentially speed up memory allocations </em><em>significantly</em><em> in APEX (and in your application). HOWEVER, If your application already uses TCMalloc, JEMalloc or TBBMalloc, </em><em>DO NOT</em><em> configure APEX with TCMalloc or JEMalloc. They will be included at application link time, and may conflict with the version detected by and linked into APEX.</em></p>
<p>There are several utility libraries that provide additional functionality in APEX. Not all libraries are required, but some are recommended.  For the following options, the default values are in <em>italics</em>.</p>
<ul>
<li><code>-DAPEX_WITH_ACTIVEHARMONY=</code>
  <em>TRUE</em> or FALSE.  Active Harmony is a library that intelligently searches for parametric combinations to support adapting to heterogeneous and changing environments.  For more information, see <a href="http://www.dyninst.org/harmony">http://www.dyninst.org/harmony</a>.  APEX uses Active Harmony for runtime adaptation.</li>
<li><code>-DACTIVEHARMONY_ROOT=</code>
  the path to Active Harmony, or set the ACTIVEHARMONY_ROOT environment variable before running cmake.  It should be noted that if Active Harmony is not specified and -DAPEX_WITH_ACTIVEHARMONY is TRUE or not set, APEX will download and build Active Harmony as a CMake project. To disable Active Harmony entirely, specify -DAPEX_WITH_ACTIVEHARMONY=FALSE.</li>
<li><code>-DAPEX_BUILD_ACTIVEHARMONY=</code>
  TRUE or <em>FALSE</em>.  Whether or not Active Harmony is installed on the system, this option forces CMake to automatically download and build Active Harmony as part of the APEX project.</li>
<li><code>-DAPEX_WITH_OMPT=</code>
  TRUE or <em>FALSE</em>.  OMPT is a proposed standard for OpenMP runtimes to provide callback hooks to performance tools. For more information, see the <a href="https://www.openmp.org/specifications/">OpenMP specification</a> v5.0 or newer.  APEX has support for most OMPT OpenMP trace events. See <a href="../usecases/#openmp-example">the OpenMP use case</a> for an example.  Some compilers (Clang 10+, Intel 19+, IBM XL 16+) include OMPT support already, and APEX will use the built-in support.  For GCC, older Clang and older Intel Compilers, APEX can build and use the <a href="https://github.com/llvm-mirror/openmp">LLVM OpenMP runtime</a> which provides KMP and GOMP API calls for those compilers.</li>
<li><code>-DOMPT_ROOT=</code>
  the path to OMPT, or set the OMPT_ROOT environment variable before running cmake.</li>
<li><code>-DAPEX_BUILD_OMPT=</code>
  TRUE or <em>FALSE</em>. Whether or not an OpenMP library with OMPT support is found by CMake, this option forces CMake to automatically download and build an OpenMP runtime with OMPT support as part of the APEX project.  In most cases, only relevant for gcc/g++.</li>
<li><code>-DAPEX_WITH_BFD=</code>
  TRUE or <em>FALSE</em>.  APEX uses libbfd (Binutils) to convert instruction addresses to source code locations. BFD support is useful for generating human-readable output for summaries and concurrency graphs. Libbfd is not required for runtime adaptation.  For more information, see <a href="https://www.gnu.org/software/binutils/">https://www.gnu.org/software/binutils/</a>.</li>
<li><code>-DBFD_ROOT=</code>
  path to Binutils, or set the BFD_ROOT environment variable.</li>
<li><code>-DAPEX_BUILD_BFD=</code>
  TRUE or FALSE.  Whether or not binutils is found by CMake, this option forces CMake to automatically download and build binutils as part of the APEX project.</li>
<li><code>-DAPEX_WITH_TCMALLOC=</code>
  TRUE or <em>FALSE</em>.  TCMalloc is a heap management library distributed as part of Google perftools. For more information, see <a href="https://github.com/gperftools/gperftools">https://github.com/gperftools/gperftools</a>.  TCMalloc provides faster memory performance in multithreaded environments.</li>
<li><code>-DGPERFTOOLS_ROOT=</code>
  path to gperftools (TCMalloc), or set the GPERFTOOLS_ROOT environment variable before running cmake.</li>
<li><code>-DAPEX_WITH_JEMALLOC=</code>
  TRUE or <em>FALSE</em>.  JEMalloc is a heap management library.  For more information, see <a href="http://www.canonware.com/jemalloc/">http://www.canonware.com/jemalloc/</a>.  JEMalloc provides faster memory performance in multithreaded environments.</li>
<li><code>-DJEMALLOC\_ROOT=</code>
  path to JEMalloc, or set the JEMALLOC_ROOT environment variable before running cmake.</li>
<li><code>-DAPEX_WITH_PAPI=</code>
  TRUE or <em>FALSE</em>.  PAPI (Performance Application Programming Interface) provides the tool designer and application engineer with a consistent interface and methodology for use of the performance counter hardware found in most major microprocessors.  For more information, see <a href="http://icl.cs.utk.edu/papi/">http://icl.cs.utk.edu/papi/</a>.  APEX uses PAPI to optionally collect hardware counters for timed events.</li>
<li><code>-DPAPI_ROOT=</code>
  some path to PAPI, or set the PAPI_ROOT environment variable before running cmake. See <a href="../usecases/#papi-example">the PAPI use case</a> for an example.</li>
<li><code>-DAPEX_WITH_LM_SENSORS=</code>
  TRUE or <em>FALSE</em>. Lm_sensors (Linux Monitoring Sensors) is a library for monitoring hardware temperatures and fan speeds. For more information, see <a href="https://en.wikipedia.org/wiki/Lm_sensors">https://en.wikipedia.org/wiki/Lm_sensors</a>.  APEX uses lm_sensors to monitor hardware, where available.</li>
<li><code>-DAPEX_BUILD_EXAMPLES=</code>
  TRUE or <em>FALSE</em>. Whether or not to build the application examples in APEX.</li>
<li><code>-DAPEX_BUILD_TESTS=</code>
  <em>TRUE</em> or FALSE. Whether or not to build the APEX unit tests.</li>
<li><code>-DAPEX_WITH_MPI=</code>
  TRUE or <em>FALSE</em>. Whether to build MPI global support and related examples.</li>
</ul>
<h3 id="other_cmake_variables_of_interest">Other CMake variables of interest<a class="headerlink" href="#other_cmake_variables_of_interest" title="Permanent link">&para;</a></h3>
<ul>
<li><code>-DCMAKE_C_COMPILER=</code>
  <em>gcc</em> or the <code>CC</code> environment variable setting</li>
<li><code>-DCMAKE_CXX_COMPILER=</code>
  <em>g++</em> or the <code>CXX</code> environment variable setting</li>
<li><code>-DCMAKE_BUILD_TYPE=</code>
  Release, <em>Debug</em>, RelWithDebInfo. Unfortunately, the cmake default (when not specified) is Debug. For faster performance, configure APEX to build RelWithDebInfo or Release.</li>
<li><code>-DBUILD_SHARED_LIBS=</code>
  TRUE or FALSE</li>
</ul>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../feature/" class="btn btn-neutral float-left" title="Feature Overview"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../usage/" class="btn btn-neutral float-right" title="Usage">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
      <p>(C) 2014-2021 University of Oregon, All Rights Reserved</p>
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="http://github.com/khuck/xpress-apex" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
      <span><a href="../feature/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../usage/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme_extra.js" defer></script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
