<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="Kevin Huck (khuck@cs.uoregon.edu)" /><link rel="canonical" href="http://UO-OACISS.github.io/apex/environment/" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Useful Environment Variables - APEX</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Useful Environment Variables";
        var mkdocs_page_input_path = "environment.md";
        var mkdocs_page_url = "/apex/environment/";
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> APEX
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../quickstarthpx/">Quick Start (HPX)</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../quickstart/">Quick Start (standalone)</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../feature/">Feature Overview</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../install/">Installation</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../usage/">Usage</a>
                </li>
              </ul>
              <ul class="current">
                <li class="toctree-l1 current"><a class="reference internal current" href="./">Useful Environment Variables</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#environment_variables">Environment Variables</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#apex_exec_flags">apex_exec flags</a>
    </li>
    </ul>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../spec/">API Specification</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../refman/">API Doxygen Reference</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">APEX</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">Useful Environment Variables</li>
    <li class="wy-breadcrumbs-aside">
          <a href="http://github.com/UO-OACISS/apex/edit/master/docs/environment.md" class="icon icon-github"> Edit on GitHub</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="apex_runtime_options">APEX Runtime Options<a class="headerlink" href="#apex_runtime_options" title="Permanent link">&para;</a></h1>
<h2 id="environment_variables">Environment Variables<a class="headerlink" href="#environment_variables" title="Permanent link">&para;</a></h2>
<p>There are a number of environment variables that control APEX behavior
at runtime. The variables can be defined in the environment before
application execution, or specified in a file called <code>apex.conf</code> in the
current execution directory.  The format of the configuration file is:</p>
<pre><code>APEX_VARIABLE1=value
APEX_VARIABLE2=value
...
</code></pre>
<p>To generate a default APEX configuration file in the current working directory, run the <code>./install/bin/apex_make_default_config</code> program.</p>
<table>
<thead>
<tr>
<th>Environment Variable</th>
<th>Default Value</th>
<th>Valid Values</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>APEX_DISABLE</code></td>
<td>0</td>
<td>0,1</td>
<td>Disable APEX during the application execution</td>
</tr>
<tr>
<td><code>APEX_SUSPEND</code></td>
<td>0</td>
<td>0,1</td>
<td>Suspend APEX timers and counters during the application execution</td>
</tr>
<tr>
<td><code>APEX_PAPI_SUSPEND</code></td>
<td>0</td>
<td>0,1</td>
<td>Suspend PAPI counters during the application execution</td>
</tr>
<tr>
<td><code>APEX_SCREEN_OUTPUT</code></td>
<td>0</td>
<td>0,1</td>
<td>Output APEX performance summary at exit</td>
</tr>
<tr>
<td><code>APEX_VERBOSE</code></td>
<td>0</td>
<td>0,1</td>
<td>Output APEX options at entry</td>
</tr>
<tr>
<td><code>APEX_PROFILE_OUTPUT</code></td>
<td>0</td>
<td>0,1</td>
<td>Output TAU profile of performance summary</td>
</tr>
<tr>
<td><code>APEX_CSV_OUTPUT</code></td>
<td>0</td>
<td>0,1</td>
<td>Output CSV profile of performance summary</td>
</tr>
<tr>
<td><code>APEX_TASKGRAPH_OUTPUT</code></td>
<td>0</td>
<td>0,1</td>
<td>Output graphviz reduced taskgraph</td>
</tr>
<tr>
<td><code>APEX_POLICY</code></td>
<td>1</td>
<td>0,1</td>
<td>Enable APEX policy listener and execute registered policies</td>
</tr>
<tr>
<td><code>APEX_PROC_STAT</code></td>
<td>1</td>
<td>0,1</td>
<td>Periodically read data from /proc/stat</td>
</tr>
<tr>
<td><code>APEX_PROC_CPUINFO</code></td>
<td>0</td>
<td>0,1</td>
<td>Read data (once) from /proc/cpuinfo</td>
</tr>
<tr>
<td><code>APEX_PROC_MEMINFO</code></td>
<td>0</td>
<td>0,1</td>
<td>Periodically read data from /proc/meminfo</td>
</tr>
<tr>
<td><code>APEX_PROC_NET_DEV</code></td>
<td>0</td>
<td>0,1</td>
<td>Periodically read data from /proc/net/dev</td>
</tr>
<tr>
<td><code>APEX_PROC_SELF_STATUS</code></td>
<td>0</td>
<td>0,1</td>
<td>Periodically read data from /proc/self/status</td>
</tr>
<tr>
<td><code>APEX_PROC_SELF_IO</code></td>
<td>0</td>
<td>0,1</td>
<td>Periodically read data from /proc/self/io</td>
</tr>
<tr>
<td><code>APEX_PROC_STAT_DETAILS</code></td>
<td>0</td>
<td>0,1</td>
<td>Periodically read detailed data from /proc/self/stat</td>
</tr>
<tr>
<td><code>APEX_PROC_PERIOD</code></td>
<td>1000000</td>
<td>Integer</td>
<td>/proc data read sampling period, in microseconds</td>
</tr>
<tr>
<td><code>APEX_MEASURE_CONCURRENCY</code></td>
<td>0</td>
<td>0,1</td>
<td>Periodically sample thread activity and output report at exit</td>
</tr>
<tr>
<td><code>APEX_MEASURE_CONCURRENCY_PERIOD</code></td>
<td>1000000</td>
<td>Integer</td>
<td>Thread concurrency sampling period, in microseconds</td>
</tr>
<tr>
<td><code>APEX_OTF2</code></td>
<td>0</td>
<td>0,1</td>
<td>Enable OTF2 trace output.</td>
</tr>
<tr>
<td><code>APEX_TRACE_EVENT</code></td>
<td>0</td>
<td>0,1</td>
<td>Enable Google Trace Event output.</td>
</tr>
<tr>
<td><code>APEX_OTF2_ARCHIVE_PATH</code></td>
<td><code>OTF2_archive</code></td>
<td>valid path</td>
<td>OTF2 trace directory.</td>
</tr>
<tr>
<td><code>APEX_OTF2_ARCHIVE_NAME</code></td>
<td><code>APEX</code></td>
<td>valid string</td>
<td>OTF2 trace filename.</td>
</tr>
<tr>
<td><code>APEX_TAU</code></td>
<td>0</td>
<td>0,1</td>
<td>Enable TAU profiling (if application is executed with <code>tau_exec</code>).</td>
</tr>
<tr>
<td><code>APEX_THROTTLE_CONCURRENCY</code></td>
<td>0</td>
<td>0,1</td>
<td>Enable thread concurrency throttling</td>
</tr>
<tr>
<td><code>APEX_THROTTLING_MIN_THREADS</code></td>
<td>1</td>
<td>0,1</td>
<td>Minimum threads allowed</td>
</tr>
<tr>
<td><code>APEX_THROTTLING_MAX_THREADS</code></td>
<td>8</td>
<td>0,1</td>
<td>Maximum threads allowed</td>
</tr>
<tr>
<td><code>APEX_THROTTLE_ENERGY</code></td>
<td>0</td>
<td>0,1</td>
<td>Enable energy throttling</td>
</tr>
<tr>
<td><code>APEX_THROTTLE_ENERGY_PERIOD</code></td>
<td>1000000</td>
<td>Integer</td>
<td>Power sampling period, in microseconds</td>
</tr>
<tr>
<td><code>APEX_THROTTLING_MIN_WATTS</code></td>
<td>150</td>
<td>Integer</td>
<td>Minimum Watt threshold</td>
</tr>
<tr>
<td><code>APEX_THROTTLING_MAX_WATTS</code></td>
<td>300</td>
<td>Integer</td>
<td>Maximum Watt threshold</td>
</tr>
<tr>
<td><code>APEX_PTHREAD_WRAPPER_STACK_SIZE</code></td>
<td>0</td>
<td>16k-8M</td>
<td>When wrapping pthread_create, use this size for the stack.</td>
</tr>
<tr>
<td><code>APEX_PAPI_METRICS</code></td>
<td><em>null</em></td>
<td>space-delimited string of metric names</td>
<td>List of metrics to be measured by APEX when timers are used. Only meaningful if APEX is configured with PAPI support.  Any supported metric from <em>papi_avail</em> (<a href="http://icl.cs.utk.edu/projects/papi/wiki/PAPIC:papi_avail.1">see PAPI Documentation</a>) can be used.</td>
</tr>
<tr>
<td><code>APEX_PAPI_SUSPEND</code></td>
<td>0</td>
<td>0,1</td>
<td>Suspend collection of PAPI metrics for APEX timers during the application execution</td>
</tr>
<tr>
<td><code>APEX_PROCESS_ASYNC_STATE</code></td>
<td>1</td>
<td>0,1</td>
<td>Enable/disable asynchronous processing of statistics (useful when only collecting trace data)</td>
</tr>
<tr>
<td><code>APEX_UNTIED_TIMERS</code></td>
<td>0</td>
<td>0,1</td>
<td>Disable callstack state maintenance for specific OS threads.  This allows APEX timers to start on one thread and stop on another.  This is not compatible with tracing.</td>
</tr>
<tr>
<td><code>APEX_OMPT_REQUIRED_EVENTS_ONLY</code></td>
<td>0</td>
<td>0,1</td>
<td>Disable moderate-frequency, moderate-overhead OMPT events.</td>
</tr>
<tr>
<td><code>APEX_OMPT_HIGH_OVERHEAD_EVENTS</code></td>
<td>0</td>
<td>0,1</td>
<td>Disable high-frequency, high-overhead OMPT events.</td>
</tr>
<tr>
<td><code>APEX_PIN_APEX_THREADS</code></td>
<td>1</td>
<td>0,1</td>
<td>Pin APEX asynchronous threads to the last core/PU on the system.</td>
</tr>
<tr>
<td><code>APEX_TASK_SCATTERPLOT</code></td>
<td>0</td>
<td>0,1</td>
<td>Periodically sample APEX tasks, generating a scatterplot of time distributions.</td>
</tr>
<tr>
<td><code>APEX_TIME_TOP_LEVEL_OS_THREADS</code></td>
<td>0</td>
<td>0,1</td>
<td>When registering threads, measure their lifetimes.</td>
</tr>
<tr>
<td><code>APEX_CUDA_COUNTERS</code></td>
<td>0</td>
<td>0,1</td>
<td>Enable CUDA CUPTI counter measurement.</td>
</tr>
<tr>
<td><code>APEX_CUDA_KERNEL_DETAILS</code></td>
<td>0</td>
<td>0,1</td>
<td>Enable Context information for CUDA CUPTI counter measurement and CUDA CUPTI API callback timers.</td>
</tr>
<tr>
<td><code>APEX_CUDA_RUNTIME_API</code></td>
<td>1</td>
<td>0,1</td>
<td>Enable callbacks for the CUDA Runtime API (<code>cuda*()</code> functions).</td>
</tr>
<tr>
<td><code>APEX_CUDA_DRIVER_API</code></td>
<td>0</td>
<td>0,1</td>
<td>Enable callbacks for the CUDA Driver API (<code>cu*()</code> functions).</td>
</tr>
<tr>
<td><code>APEX_JUPYTER_SUPPORT</code></td>
<td>0</td>
<td>0,1</td>
<td>When running HPX in a Jupyter notebook, enable special handling for APEX data output and system reset.</td>
</tr>
</tbody>
</table>
<h2 id="apex_exec_flags"><code>apex_exec</code> flags<a class="headerlink" href="#apex_exec_flags" title="Permanent link">&para;</a></h2>
<p>To control the behavior of APEX when using <code>apex_exec</code>, many flags are available, several of which will automatically set the above environment variables as necessary:</p>
<pre><code>Usage:
apex_exec &lt;APEX options&gt; executable &lt;executable options&gt;

where APEX options are zero or more of:
    --apex:help            show this usage message
    --apex:debug           run with APEX in debugger
    --apex:verbose         enable verbose list of APEX environment variables
    --apex:screen          enable screen text output (on by default)
    --apex:quiet           disable screen text output
    --apex:csv             enable csv text output
    --apex:tau             enable tau profile output
    --apex:taskgraph       enable taskgraph output
                           (graphviz required for post-processing)
    --apex:otf2            enable OTF2 trace output
    --apex:otf2path        specify location of OTF2 archive
                           (default: ./OTF2_archive)
    --apex:otf2name        specify name of OTF2 file (default: APEX)
    --apex:gtrace          enable Google Trace Events output
    --apex:scatter         enable scatterplot output
                           (python required for post-processing)
    --apex:openacc         enable OpenACC support
    --apex:kokkos          enable Kokkos support
    --apex:raja            enable RAJA support
    --apex:pthread         enable pthread wrapper support
    --apex:untied          enable tasks to migrate cores/OS threads
                           during execution (not compatible with trace output)
    --apex:cuda_counters   enable CUDA/CUPTI counter support
    --apex:cuda_driver     enable CUDA driver API callbacks
    --apex:cuda_details    enable per-kernel statistics where available
    --apex:cpuinfo         enable sampling of /proc/cpuinfo (Linux only)
    --apex:meminfo         enable sampling of /proc/meminfo (Linux only)
    --apex:net             enable sampling of /proc/net/dev (Linux only)
    --apex:status          enable sampling of /proc/self/status (Linux only)
    --apex:io              enable sampling of /proc/self/io (Linux only)
    --apex:period          specify frequency of OS/HW sampling
    --apex:ompt_simple     only enable OpenMP Tools required events
    --apex:ompt_details    enable all OpenMP Tools events
</code></pre>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../usage/" class="btn btn-neutral float-left" title="Usage"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../spec/" class="btn btn-neutral float-right" title="API Specification">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
      <p>(C) 2014-2023 University of Oregon, All Rights Reserved</p>
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="http://github.com/UO-OACISS/apex" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
      <span><a href="../usage/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../spec/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
